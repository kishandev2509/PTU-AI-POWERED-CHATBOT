{% extends "base.html" %} {% block title %}Dashboard{% endblock %} {% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}" />
{% endblock %} {% block content %}
<div class="container mt-4">
	<div class="row">
		<!-- Profile Card -->
		<div class="col-md-4 mb-4">
			<div class="card profile-card h-100">
				<div class="card-header profile-header">
					<h4 class="mb-0"><i class="bi bi-person-circle me-2"></i>Profile Information</h4>
				</div>
				<div class="card-body d-flex flex-column">
					<div class="profile-photo-container text-center">
						<div class="d-flex flex-row">
							<div class="profile-photo-wrapper">
								<img
									src="{{ current_user.get_profile_photo_url() or 'https://ui-avatars.com/api/?name=' + current_user.username + '&background=random' }}"
									alt="Profile Photo"
									class="profile-photo"
									id="profile-photo" />
								<label for="profile-photo-upload" class="photo-upload-label">
									<i class="bi bi-plus-circle-fill"></i>
								</label>
								<input type="file" class="profile-photo-upload d-none" id="profile-photo-upload" accept="image/*" />
							</div>
							<div class="d-flex flex-column">
								<h4 class="mt-2 user-name">{{ current_user.full_name }}</h4>
								<div class="user-status">
									<i class="bi bi-shield-check"></i>
									Active Student
								</div>
							</div>
						</div>
					</div>
					<div class="profile-info">
						<div>
							<div class="username-display">
								<i class="bi bi-person-badge"></i>
								{{ current_user.username }}
							</div>
							<p class="text-muted user-course mb-2">
								{{ current_user.course }} - Semester {{ current_user.semester }}
							</p>
						</div>
						<div class="info-section">
							<div class="info-item">
								<div class="info-icon">
									<i class="bi bi-envelope-fill"></i>
								</div>
								<div class="info-content">
									<div class="info-label">Email</div>
									<div class="info-value">{{ current_user.email }}</div>
								</div>
							</div>
							<div class="info-item">
								<div class="info-icon">
									<i class="bi bi-123"></i>
								</div>
								<div class="info-content">
									<div class="info-label">Roll No.</div>
									<div class="info-value">{{ current_user.enrollment_number }}</div>
								</div>
							</div>
							<div class="info-item">
								<div class="info-icon">
									<i class="bi bi-mortarboard-fill"></i>
								</div>
								<div class="info-content">
									<div class="info-label">Branch</div>
									<div class="info-value">{{ current_user.course }}</div>
								</div>
							</div>
							<div class="info-item">
								<div class="info-icon">
									<i class="bi bi-calendar-check"></i>
								</div>
								<div class="info-content">
									<div class="info-label">Joined</div>
									<div class="info-value">{{ current_user.created_at.strftime('%b %Y') }}</div>
								</div>
							</div>
						</div>
					</div>

					<div class="profile-actions">
						<a href="{{ url_for('routes.profile') }}" class="btn btn-primary edit-profile-btn w-100">
							<i class="bi bi-pencil-square me-2"></i>Edit Profile
						</a>
					</div>
				</div>
			</div>
		</div>

		<!-- Quick Actions -->
		<div class="col-md-8">
			<div class="quick-actions-section">
				<h2 class="section-title"><i class="bi bi-lightning-charge-fill"></i> Quick Actions</h2>
				<div class="row g-4">
					<div class="col-md-6">
						<a
							href="https://ptu.ac.in/academic-calendar-regular/"
							class="quick-action-card"
							target="_blank">
							<div class="card-content">
								<i class="bi bi-calendar3"></i>
								<span>Academic Calender</span>
							</div>
						</a>
					</div>
					<div class="col-md-6">
						<a href="https://www.ptuexam.com/" class="quick-action-card" target="_blank">
							<div class="card-content">
								<i class="bi bi-graph-up"></i>
								<span>View Results</span>
							</div>
						</a>
					</div>
					<div class="col-md-6">
						<a href="#" class="quick-action-card">
							<div class="card-content">
								<i class="bi bi-book"></i>
								<span>Course Materials</span>
							</div>
						</a>
					</div>
					<div class="col-md-6">
						<a
							href="https://ptu.ac.in/syllabus/#1610102986246-e6ac72c5-c6da"
							class="quick-action-card"
							target="_blank">
							<div class="card-content">
								<i class="bi bi-journal-text"></i>
								<span>Syllabus</span>
							</div>
						</a>
					</div>
				</div>
			</div>

			<!-- Notifications -->
			<div class="card">
				<div class="card-header">
					<h4 class="mb-0"><i class="bi bi-bell"></i> Recent Notifications</h4>
				</div>
				<div class="card-body">
					<div class="notices-container" id="noticesContainer">
						{% if notices %} {% for notice in notices %}
						<div class="notice-item {% if loop.index > 4 %}hidden-notice{% endif %}">
							<div class="notice-content">
								<a href="{{ notice.link }}" target="_blank" class="notice-title">{{ notice.title }}</a>
								<div class="notice-date">
									<i class="far fa-calendar-alt me-1"></i>
									{{ notice.date_posted.strftime('%d %B, %Y') }}
								</div>
							</div>
							<a href="{{ notice.link }}" target="_blank" class="notice-link">
								<i class="fas fa-external-link-alt"></i>
							</a>
						</div>
						{% endfor %} {% if notices|length > 4 %}
						<div class="text-center mt-3">
							<button class="btn btn-outline-primary show-more-btn" onclick="showMoreNotices()">
								<i class="fas fa-chevron-down"></i> Show More
							</button>
						</div>
						{% endif %} {% else %}
						<div class="text-center py-4">
							<i class="fas fa-info-circle text-muted mb-2" style="font-size: 2rem"></i>
							<p class="text-muted mb-0">No notices available at the moment.</p>
						</div>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
